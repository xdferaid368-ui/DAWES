PRÁCTICA 2 — Serialización y validación
Objetivo
Crear un modelo propio y validar datos mediante serializers.

Paso 1 — Crear modelo Producto
En api/models.py:

from django.db import models

class Producto(models.Model):
    nombre = models.CharField(max_length=100)
    precio = models.FloatField()
    disponible = models.BooleanField(default=True)

    def __str__(self):
        return self.nombre
Migrar:

python manage.py makemigrations
python manage.py migrate
Paso 2 — Crear serializer con validación
En api/serializers.py:

from .models import Producto

class ProductoSerializer(serializers.ModelSerializer):
    class Meta:
        model = Producto
        fields = '__all__'

    def validate_precio(self, value):
        if value <= 0:
            raise serializers.ValidationError("El precio debe ser mayor que 0")
        return value

    def validate_nombre(self, value):
        if len(value) < 3:
            raise serializers.ValidationError("El nombre debe tener al menos 3 caracteres")
        return value
Paso 3 — Crear ViewSet
En api/views.py:

from .models import Producto
from .serializers import ProductoSerializer

class ProductoViewSet(viewsets.ModelViewSet):
    queryset = Producto.objects.all()
    serializer_class = ProductoSerializer
Registrar en router:

router.register(r'productos', ProductoViewSet)
Paso 4 — Probar validaciones
Probar POST con datos incorrectos y verificar que devuelve error 400 con mensajes claros.


